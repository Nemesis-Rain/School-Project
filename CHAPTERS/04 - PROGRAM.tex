\chapter{Program a jeho realizace}
Nejefektivnější se zdálo psát program v programovacím prostředí Visual Studio Code, se kterým jsem měla nejvíc zkušeností. 

Jedná se o bezplatný editor zdrojového kódu, vhodný pro programování v jakémkoliv programovacím jazyce, bez potřeby přepínání mezi editory. Visual Studio Code má podporu programovacích jazyků jako jsou: Phyton, java, C++, Javascript a mnoho dalších. 

Kromě Visual Studio Code bylo při realizaci použito i jeho plug-in rozšíření s názvem PlatformIO, což je soubor knihoven, kompatibilních s knihovnami od Robotárny. Robotárna toto rozšíření využívá a programuje v něm už léta.  Je skvěle kompatibilní s Arduinem a knihovnami SmartLeds – které byly použity z důvodu jejich jednoduchosti a intuitivnosti při programování s RGB.
%Bylo použito vs. Požila jsem????



\section{Diagram Programu }

\begin{figure}[htbp]
	\centering
	\includegraphics[width=1\textwidth]{img/04 prog/Diagram programu.png}
	\caption{Diagram programu}
	%	\label{fig:install-sdk-3}
\end{figure}

Tento vývojový diagram ukazuje příkazy programu, jak jsou od spuštění (zmáčknutím tlačítka se začne provádět inicializace) až do vypnutí (proces vypnutí může být zahájen v jakékoliv části programu, stačí jen sepnout tlačítko, a tím přerušit dodávku el energie). 
\newpage

Zde jsou více rozepsané některé části programu:


\subsection{Inicializace}
V této části programu Po spuštění programu se začnou okamžitě načítat a spouštět veškeré knihovny, zahrnuté v programu. Mezi nimi je i náš soubor layout.hpp, který byl vytvořen a uložen v předchozí kapitole. Jsou zde také informace, který je řídící pin LED pásku a kolik LED bude pásek, obsahovat.


\subsection{Konfigurace WiFi a připojení}
%konfigurace = nastavení
V této části programu se kompletně nastaví vysílaný WiFi signál. Nastaví se jméno a heslo, pod kterými se na ni lze připojit. V našem případě se jedná o WiFi s názvem LEDLED a heslem „ledkyledky.“ Dále se nastaví vlastník zařízení, název zařízení, čas kompilace zařízení a za pomoci souboru layout.hpp sa nastaví podoba ovládacího panelu v mobilním telefonu. 

Po připojení mobilního telefonu na WiFi a zobrazení ovládacího panelu v aplikaci RBController už program v ESP32-DevKitC jenom čeká na jeden z naprogramovaných příkazů, aby ho mohl provést.
%Inicializace zařízení? 


\subsection{Příkazy}
Příkazy se v tomhle případě rozmí naše 4 nadefinovaná tlačítka, které jsme si vytvořili v předchozí kapitole. Každé z těchto tlačítek má v programu přidělenou vlastní funkci, kterou po zmáčknutí provede.

Barva světel je naprogramovaná pomocí RGB spektra. V některých případech se jedná o jednu prostou barvu, v jiných o donekonečna se opakující se různobarevný cyklus. 

Tlačítka a jejich příkazy: 
\textbf{Červená růže} – barva LED se nastaví na RGB(64,0,0) – tedy červenou barvu. Touto barvou zařízení září po celou dobu. 

\textbf{Ledová růže} – Jedná se o cyklický barevný přechod. Světle modré světlo se pomalu rozsvěcuje a poté zhasíná, čímž vytváří pulzující dojem magického předmětu. 

\textbf{Disko růže} – Cyklus, ve kterém se střídají zběsile 3 barvy (červená, modrá a zelená) Bylo spíše myšleno jako vtip a nachází se zde pro zastoupení různorodosti barevných kombinací. 

\textbf{Duhová růže} – Mnohobarevný cyklus, který projde celým barevným spektrem. 

Veškeré příkazy jsou provedeny pomocí nadefinované funkce SetLedAll, která při zadání 3 čísel automaticky veškeré LED na pásku nastaví na danou RGB barvu, a není potřeba každou jednotlivou LED nastavovat samostatně. Tento příkaz také obsahuje také pár příkazů na stabilizaci LED.

Při programovaní LED pásku nebyla použita maximální intenzita LED pásku. Rozsah RGB je sice od 0 do 255, ale při použití plné intenzity 225, bylo světlo z LED až moc jasné a po delší práci a koukání se na barvy z něj začali bolet oči a hlava. Proto v rámci bezpečnosti byla světelná intenzita LED pásku snížena na čtvrtinu. 
\newpage